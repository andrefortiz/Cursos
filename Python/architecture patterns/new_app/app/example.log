INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetBaches(ref='batch-1-e5503e')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:24:41] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetBaches(ref='batch-1-e5503e')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:18] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:23] "[31m[1mPOST /products HTTP/1.1[0m" 400 -
INFO:root:handling command GetProducts(sku='batch-1-e5503e')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:30] "[37mPOST /products HTTP/1.1[0m" 200 -
INFO:root:handling command CreateBatch(ref='batch-newer-cdb516', sku='sku--d79890', qty=10, eta=datetime.date(2011, 1, 2))
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:56] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:root:handling command CreateBatch(ref='batch-old-708509', sku='sku--d79890', qty=10, eta=datetime.date(2011, 1, 3))
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:57] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:root:handling command Allocate(orderid='order--7b9b93', sku='sku--d79890', qty=10)
INFO:root:handling event Allocated(orderid='order--7b9b93', sku='sku--d79890', qty=10, batchref='batch-newer-cdb516') with handler <function publish_allocated_event at 0x000002243BF829D8>
INFO:root:vai publicar o evento line_allocated
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:25:58] "[37mPOST /allocate HTTP/1.1[0m" 201 -
INFO:root:handling command GetBaches(ref='batch-newer-cdb516')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:26:12] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:52:31] "[31m[1mPOST /order_lines HTTP/1.1[0m" 405 -
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:52:48] "[31m[1mGET /order_lines HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetOrderLines(sku=' ')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 17:53:11] "[37mGET /order_lines HTTP/1.1[0m" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command CreateBatch(ref='batch-newer-9712a1', sku='sku--45fe98', qty=10, eta=datetime.date(2011, 1, 2))
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:15:48] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:root:handling command CreateBatch(ref='batch-old-5306fd', sku='sku--45fe98', qty=10, eta=datetime.date(2011, 1, 3))
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:15:48] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:root:handling command Allocate(orderid='order--28549e', sku='sku--45fe98', qty=10)
INFO:root:handling event Allocated(orderid='order--28549e', sku='sku--45fe98', qty=10, batchref='batch-newer-9712a1') with handler <function publish_allocated_event at 0x000002562AEFB1F8>
INFO:root:vai publicar o evento line_allocated
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:15:49] "[37mPOST /allocate HTTP/1.1[0m" 201 -
INFO:root:handling command GetBaches(ref='batch-newer-9712a1')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:15:49] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:root:handling command GetBaches(ref='batch-newer-9712a1')
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:17:01] "[31m[1mPOST /product HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetProductByRef(ref='batch-newer-9712a1')
INFO:root:achou o produto: sku--45fe98
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:17:59] "[31m[1mPOST /product HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetProductByRef(ref='batch-newer-9712a1')
INFO:root:achou o produto: sku--45fe98
INFO:werkzeug:127.0.0.1 - - [20/Jun/2020 18:18:23] "[37mPOST /product HTTP/1.1[0m" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [21/Jun/2020 13:20:44] "[31m[1mPOST /batches HTTP/1.1[0m" 400 -
INFO:werkzeug:127.0.0.1 - - [21/Jun/2020 13:21:17] "[31m[1mPOST /batches HTTP/1.1[0m" 400 -
INFO:root:handling command GetBaches(ref='1')
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetProductByRef(ref='batch-newer-9712a1')
INFO:root:não achou o produto: None pra referencia: batch-newer-9712a1
INFO:werkzeug:127.0.0.1 - - [22/Jun/2020 20:07:27] "[37mPOST /product HTTP/1.1[0m" 200 -
INFO:root:handling command GetBaches(ref='batch-newer-9712a1')
INFO:werkzeug:127.0.0.1 - - [22/Jun/2020 20:07:44] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [23/Jun/2020 20:21:51] "[33mGET /allocations/1 HTTP/1.1[0m" 404 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command GetBaches(ref='batch-newer-9712a1')
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 21:59:23] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:root:handling command GetBaches(ref='batch-newer-9712a1')
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 21:59:57] "[37mPOST /batches HTTP/1.1[0m" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 22:00:21] "[31m[1mPOST /add_batch HTTP/1.1[0m" 400 -
INFO:root:handling command CreateBatch(ref='batch-newer-9712a1', sku='1', qty=100, eta=None)
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 22:00:54] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:root:handling command CreateBatch(ref='batch-newer-9712a1', sku='1', qty=100, eta=None)
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 22:01:51] "[37mPOST /add_batch HTTP/1.1[0m" 201 -
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 22:02:53] "[31m[1mGET /allocate HTTP/1.1[0m" 405 -
INFO:root:handling command Allocate(orderid='1', sku='1', qty=1)
ERROR:sqlalchemy.pool.impl.NullPool:Exception during reset or similar
Traceback (most recent call last):
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\pool\base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\pool\base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\engine\default.py", line 538, in do_rollback
    dbapi_connection.rollback()
sqlite3.ProgrammingError: SQLite objects created in a thread can only be used in that same thread. The object was created in thread id 12744 and this is thread id 13664.
ERROR:sqlalchemy.pool.impl.NullPool:Exception closing connection <sqlite3.Connection object at 0x000001CF48A25AB0>
Traceback (most recent call last):
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\pool\base.py", line 693, in _finalize_fairy
    fairy._reset(pool)
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\pool\base.py", line 880, in _reset
    pool._dialect.do_rollback(self)
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\engine\default.py", line 538, in do_rollback
    dbapi_connection.rollback()
sqlite3.ProgrammingError: SQLite objects created in a thread can only be used in that same thread. The object was created in thread id 12744 and this is thread id 13664.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\pool\base.py", line 270, in _close_connection
    self._dialect.do_close(connection)
  File "C:\Users\ghann\Anaconda3\lib\site-packages\sqlalchemy\engine\default.py", line 544, in do_close
    dbapi_connection.close()
sqlite3.ProgrammingError: SQLite objects created in a thread can only be used in that same thread. The object was created in thread id 12744 and this is thread id 13664.
INFO:werkzeug:127.0.0.1 - - [25/Jun/2020 22:03:15] "[31m[1mPOST /allocate HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:root:handling command Allocate(orderid='1', sku='1', qty=1)
INFO:root:handling event Allocated(orderid='1', sku='1', qty=1, batchref='batch-newer-9712a1') with handler <function publish_allocated_event at 0x0000021EC0966DC8>
INFO:root:vai publicar o evento line_allocated: Allocated(orderid='1', sku='1', qty=1, batchref='batch-newer-9712a1')
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [04/Jul/2020 17:15:51] "[31m[1mPOST /allocate HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [04/Jul/2020 17:21:04] "[31m[1mPOST /allocate HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
INFO:werkzeug:127.0.0.1 - - [04/Jul/2020 17:21:56] "[31m[1mPOST /allocate HTTP/1.1[0m" 400 -
INFO:werkzeug: * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
